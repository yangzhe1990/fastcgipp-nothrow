<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>fastcgi++: ASql::Data::Set Struct Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">fastcgi++
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="a00114.html">ASql</a></li><li class="navelem"><a class="el" href="a00115.html">Data</a></li><li class="navelem"><a class="el" href="a00064.html">Set</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a>  </div>
  <div class="headertitle">
<div class="title">ASql::Data::Set Struct Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="a00093_source.html">data.hpp</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for ASql::Data::Set:</div>
<div class="dyncontent">
 <div class="center">
  <img src="a00064.png" usemap="#ASql::Data::Set_map" alt=""/>
  <map id="ASql::Data::Set_map" name="ASql::Data::Set_map">
<area href="a00033.html" title="Wraps a Set object around an new auto-allocated individual object of type T." alt="ASql::Data::IndySetBuilder&lt; T &gt;" shape="rect" coords="0,56,222,80"/>
<area href="a00034.html" title="Wraps a Set object around a pointer to an individual object of type T." alt="ASql::Data::IndySetPtrBuilder&lt; T &gt;" shape="rect" coords="232,56,454,80"/>
<area href="a00035.html" title="Wraps a Set object around a reference to an individual object of type T." alt="ASql::Data::IndySetRefBuilder&lt; T &gt;" shape="rect" coords="464,56,686,80"/>
<area href="a00065.html" title="Wraps a Set object around an new auto-allocated dataset of type T." alt="ASql::Data::SetBuilder&lt; T &gt;" shape="rect" coords="696,56,918,80"/>
<area href="a00068.html" title="Wraps a Set object around a pointer to a dataset of type T." alt="ASql::Data::SetPtrBuilder&lt; T &gt;" shape="rect" coords="928,56,1150,80"/>
<area href="a00069.html" title="Wraps a Set object around a reference to a dataset of type T." alt="ASql::Data::SetRefBuilder&lt; T &gt;" shape="rect" coords="1160,56,1382,80"/>
<area href="a00070.html" title="Wraps a Set object around a shared pointer to a dataset of type T." alt="ASql::Data::SetSharedPtrBuilder&lt; T &gt;" shape="rect" coords="1392,56,1614,80"/>
</map>
 </div></div>

<p><a href="a00148.html">List of all members.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a09fedd0fedf319e49a365e379fa7e7ad"><td class="memItemLeft" align="right" valign="top">virtual size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00064.html#a09fedd0fedf319e49a365e379fa7e7ad">numberOfSqlElements</a> () const =0</td></tr>
<tr class="memdesc:a09fedd0fedf319e49a365e379fa7e7ad"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get total number of indexable data members.  <a href="#a09fedd0fedf319e49a365e379fa7e7ad"></a><br/></td></tr>
<tr class="memitem:a59e2f97bee593ac3dc625591466d50a4"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="a00032.html">Index</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00064.html#a59e2f97bee593ac3dc625591466d50a4">getSqlIndex</a> (const size_t index) const =0</td></tr>
<tr class="memdesc:a59e2f97bee593ac3dc625591466d50a4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get constant void pointer to member data.  <a href="#a59e2f97bee593ac3dc625591466d50a4"></a><br/></td></tr>
<tr class="memitem:a3cd1b91e94d20b62cb3d540824068d72"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00064.html#a3cd1b91e94d20b62cb3d540824068d72">~Set</a> ()</td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>! Base data set class for communicating parameters and results with SQL queries.</p>
<p>Note that in most cases you are better off using one the following templated wrapper classes to associate you data set with <a class="el" href="a00114.html" title="Defines classes and functions relating to SQL querying.">ASql</a>. This eliminates the overhead of virtual functions from your data type if it is used in a computationally intensive situation.</p>
<ul>
<li><a class="el" href="a00065.html" title="Wraps a Set object around an new auto-allocated dataset of type T.">SetBuilder</a></li>
<li><a class="el" href="a00069.html" title="Wraps a Set object around a reference to a dataset of type T.">SetRefBuilder</a></li>
<li><a class="el" href="a00068.html" title="Wraps a Set object around a pointer to a dataset of type T.">SetPtrBuilder</a></li>
<li><a class="el" href="a00070.html" title="Wraps a Set object around a shared pointer to a dataset of type T.">SetSharedPtrBuilder</a></li>
<li><a class="el" href="a00033.html" title="Wraps a Set object around an new auto-allocated individual object of type T.">IndySetBuilder</a></li>
<li><a class="el" href="a00035.html" title="Wraps a Set object around a reference to an individual object of type T.">IndySetRefBuilder</a></li>
</ul>
<p>Or for <a class="el" href="a00067.html" title="Base class for containers of Data::Set objects to be used for result/parameter data in SQL queries...">ASql::Data::SetContainer</a> objects</p>
<ul>
<li><a class="el" href="a00078.html" title="Wraps a SetContainer object around a new auto-allocated STL container of type T.">STLSetContainer</a></li>
<li><a class="el" href="a00079.html" title="Wraps a SetContainer object around a reference to an STL container of type T.">STLSetRefContainer</a></li>
<li><a class="el" href="a00080.html" title="Wraps a SetContainer object around a shared pointer to an STL container of type T.">STLSharedSetContainer</a></li>
</ul>
<p>If you use this technique you MUST still define the <a class="el" href="a00064.html#a09fedd0fedf319e49a365e379fa7e7ad" title="Get total number of indexable data members.">numberOfSqlElements()</a> and <a class="el" href="a00064.html#a59e2f97bee593ac3dc625591466d50a4" title="Get constant void pointer to member data.">getSqlIndex()</a> in your dataset as below but do not derive from <a class="el" href="a00064.html">Set</a>. The function will be called from the templates instead of virtually.</p>
<p>By deriving from this class any data structure can gain the capability to be binded to the parameters or results of an SQL query. This is accomplished polymorphically through two virtual member functions that allow the object to be treated as a container and it's member data indexed as it's elements. An example derivation follows: </p>
<div class="fragment"><div class="line"><span class="keyword">struct </span>TestSet: <span class="keyword">public</span> <a class="code" href="a00064.html">ASql::Data::Set</a></div>
<div class="line">{</div>
<div class="line">   <a class="code" href="a00043.html" title="Class for adding null capabilities to any type. Needed for SQL queries involving.">ASql::Data::DoubleN</a> fraction;</div>
<div class="line">   <a class="code" href="a00043.html" title="Class for adding null capabilities to any type. Needed for SQL queries involving.">ASql::Data::DateN</a> aDate;</div>
<div class="line">   <a class="code" href="a00115.html#abbe555589f624cd3358036fac83f417e">ASql::Data::Time</a> aTime;</div>
<div class="line">   <a class="code" href="a00043.html" title="Class for adding null capabilities to any type. Needed for SQL queries involving.">ASql::Data::DatetimeN</a> timestamp;</div>
<div class="line">   <a class="code" href="a00043.html" title="Class for adding null capabilities to any type. Needed for SQL queries involving.">ASql::Data::WtextN</a> someText;</div>
<div class="line">   ASql::Data::BlobN someData;</div>
<div class="line">   <span class="keywordtype">char</span> fixedString[16];</div>
<div class="line"></div>
<div class="line">   <span class="keywordtype">size_t</span> <a class="code" href="a00064.html#a09fedd0fedf319e49a365e379fa7e7ad" title="Get total number of indexable data members.">numberOfSqlElements</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> 7; }</div>
<div class="line">   <a class="code" href="a00032.html" title="Stores on index value from a Set.">ASql::Data::Index</a> <a class="code" href="a00064.html#a59e2f97bee593ac3dc625591466d50a4" title="Get constant void pointer to member data.">getSqlIndex</a>(<span class="keywordtype">size_t</span> index)<span class="keyword"> const</span></div>
<div class="line"><span class="keyword">   </span>{</div>
<div class="line">      <span class="keywordflow">switch</span>(index)</div>
<div class="line">      {</div>
<div class="line">         <span class="keywordflow">case</span> 0:</div>
<div class="line">            <span class="keywordflow">return</span> fraction;</div>
<div class="line">         <span class="keywordflow">case</span> 1:</div>
<div class="line">            <span class="keywordflow">return</span> aDate;</div>
<div class="line">         <span class="keywordflow">case</span> 2:</div>
<div class="line">            <span class="keywordflow">return</span> aTime;</div>
<div class="line">         <span class="keywordflow">case</span> 3:</div>
<div class="line">            <span class="keywordflow">return</span> timeStamp;</div>
<div class="line">         <span class="keywordflow">case</span> 4:</div>
<div class="line">            <span class="keywordflow">return</span> someText;</div>
<div class="line">         <span class="keywordflow">case</span> 5:</div>
<div class="line">            <span class="keywordflow">return</span> someData;</div>
<div class="line">         <span class="keywordflow">case</span> 6:</div>
<div class="line">            <span class="keywordflow">return</span> <a class="code" href="a00032.html" title="Stores on index value from a Set.">ASql::Data::Index</a>(fixedChunk, <span class="keyword">sizeof</span>(fixedString));</div>
<div class="line">         <span class="keywordflow">default</span>:</div>
<div class="line">            <span class="keywordflow">return</span> <a class="code" href="a00032.html" title="Stores on index value from a Set.">ASql::Data::Index</a>();</div>
<div class="line">      }</div>
<div class="line">   }</div>
<div class="line">};</div>
</div><!-- fragment --><p> Note that this same example can be more easily done with the use of the ASQL_BUILDSET macro. In the following example we will also use the set builders. </p>
<div class="fragment"><div class="line"><span class="keyword">struct </span>TestSet</div>
<div class="line">{</div>
<div class="line">   <a class="code" href="a00043.html" title="Class for adding null capabilities to any type. Needed for SQL queries involving.">ASql::Data::DoubleN</a> fraction;</div>
<div class="line">   <a class="code" href="a00043.html" title="Class for adding null capabilities to any type. Needed for SQL queries involving.">ASql::Data::DateN</a> aDate;</div>
<div class="line">   <a class="code" href="a00115.html#abbe555589f624cd3358036fac83f417e">ASql::Data::Time</a> aTime;</div>
<div class="line">   <a class="code" href="a00043.html" title="Class for adding null capabilities to any type. Needed for SQL queries involving.">ASql::Data::DatetimeN</a> timestamp;</div>
<div class="line">   <a class="code" href="a00043.html" title="Class for adding null capabilities to any type. Needed for SQL queries involving.">ASql::Data::WtextN</a> someText;</div>
<div class="line">   ASql::Data::BlobN someData;</div>
<div class="line">   <span class="keywordtype">char</span> fixedString[16];</div>
<div class="line"></div>
<div class="line">   <a class="code" href="a00093.html#ac54334c6f5bcdb3904f7d45896aca042" title="Build the appropriate function to make a Data::Set compatible data structure.">ASQL_BUILDSET</a>(</div>
<div class="line">      (fraction)\</div>
<div class="line">      (aDate)\</div>
<div class="line">      (aTime)\</div>
<div class="line">      (timeStamp)\</div>
<div class="line">      (someText)\</div>
<div class="line">      (someData)\</div>
<div class="line">      (<a class="code" href="a00032.html" title="Stores on index value from a Set.">ASql::Data::Index</a>(fixedChunk, <span class="keyword">sizeof</span>(fixedString)))\</div>
<div class="line">      )</div>
<div class="line">};</div>
</div><!-- fragment --><p> Then to make a <a class="el" href="a00064.html">Data::Set</a> out of it </p>
<div class="fragment"><div class="line"><span class="keyword">typedef</span> <a class="code" href="a00065.html" title="Wraps a Set object around an new auto-allocated dataset of type T.">ASql::Data::SetBuilder&lt;TestSet&gt;</a> FunctionalTestSet;</div>
</div><!-- fragment --><p> or maybe a <a class="el" href="a00067.html" title="Base class for containers of Data::Set objects to be used for result/parameter data in SQL queries...">Data::SetContainer</a> </p>
<div class="fragment"><div class="line"><span class="keyword">typedef</span> <a class="code" href="a00067.html" title="Base class for containers of Data::Set objects to be used for result/parameter data in SQL queries...">ASql::Data::SetContainer&lt;std::deque&lt;TestSet&gt;</a> &gt; FunctionalTestContainer;</div>
</div><!-- fragment --><p> Note that in both examples the indexing order must match the result column/parameter order of the SQL query.</p>
<p>In order to be binded to a particular SQL type indexed elements in the class should be of a type that is typedefed in <a class="el" href="a00115.html" title="Defines data types and conversion techniques standard to the fastcgipp SQL facilities.">ASql::Data</a> (don't worry, they are all standard types). This however is not a requirement as any plain old data structure can be indexed but it will be stored as a binary data array. Be sure to examine the constructors for <a class="el" href="a00032.html" title="Stores on index value from a Set.">Index</a>. For a default it is best to return a default constructed <a class="el" href="a00032.html" title="Stores on index value from a Set.">Index</a> object.</p>
<dl class="section see"><dt>See also:</dt><dd><a class="el" href="a00043.html" title="Class for adding null capabilities to any type. Needed for SQL queries involving.">ASql::Data::Nullable</a> </dd></dl>

<p>Definition at line <a class="el" href="a00093_source.html#l00342">342</a> of file <a class="el" href="a00093_source.html">data.hpp</a>.</p>
</div><hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a3cd1b91e94d20b62cb3d540824068d72"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual ASql::Data::Set::~Set </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="a00093_source.html#l00361">361</a> of file <a class="el" href="a00093_source.html">data.hpp</a>.</p>

</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a59e2f97bee593ac3dc625591466d50a4"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual <a class="el" href="a00032.html">Index</a> ASql::Data::Set::getSqlIndex </td>
          <td>(</td>
          <td class="paramtype">const size_t&#160;</td>
          <td class="paramname"><em>index</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get constant void pointer to member data. </p>
<p>Because of the implicit constructors in <a class="el" href="a00032.html" title="Stores on index value from a Set.">Index</a>, for most types it suffices to just return the member object itself.</p>
<dl class="params"><dt>Parameters:</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">index</td><td>index <a class="el" href="a00032.html" title="Stores on index value from a Set.">Index</a> number for member, starting at 0.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns:</dt><dd>Constant void pointer to member data. </dd></dl>

<p>Implemented in <a class="el" href="a00034.html#a79ab94b1fded250afe3a7c4d108098aa">ASql::Data::IndySetPtrBuilder&lt; T &gt;</a>, <a class="el" href="a00034.html#a79ab94b1fded250afe3a7c4d108098aa">ASql::Data::IndySetPtrBuilder&lt; typename T::value_type &gt;</a>, <a class="el" href="a00035.html#adc2bf99b9211fd68b94951daa06057b3">ASql::Data::IndySetRefBuilder&lt; T &gt;</a>, <a class="el" href="a00033.html#add9a11078f3edd12855f77e87b81525f">ASql::Data::IndySetBuilder&lt; T &gt;</a>, <a class="el" href="a00070.html#a6c2490fdee9ff632e36588a1f8f41493">ASql::Data::SetSharedPtrBuilder&lt; T &gt;</a>, <a class="el" href="a00068.html#a9637c84f1d794f42a448a101d0cade6e">ASql::Data::SetPtrBuilder&lt; T &gt;</a>, <a class="el" href="a00068.html#a9637c84f1d794f42a448a101d0cade6e">ASql::Data::SetPtrBuilder&lt; typename T::value_type &gt;</a>, <a class="el" href="a00069.html#ab80b9778ab0bb18f90afb2af98ebbc0d">ASql::Data::SetRefBuilder&lt; T &gt;</a>, and <a class="el" href="a00065.html#aabab8fa2ba7b3a7febe1e19d3df50b0c">ASql::Data::SetBuilder&lt; T &gt;</a>.</p>

</div>
</div>
<a class="anchor" id="a09fedd0fedf319e49a365e379fa7e7ad"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual size_t ASql::Data::Set::numberOfSqlElements </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get total number of indexable data members. </p>
<dl class="section return"><dt>Returns:</dt><dd>Total number of indexable data members. </dd></dl>

<p>Implemented in <a class="el" href="a00034.html#a9995f2ddf69dc0406bc4bbb14eaff43d">ASql::Data::IndySetPtrBuilder&lt; T &gt;</a>, <a class="el" href="a00034.html#a9995f2ddf69dc0406bc4bbb14eaff43d">ASql::Data::IndySetPtrBuilder&lt; typename T::value_type &gt;</a>, <a class="el" href="a00035.html#ada101cb538db64dec78d1c63c929334d">ASql::Data::IndySetRefBuilder&lt; T &gt;</a>, <a class="el" href="a00033.html#aadaa660adca2091275a7a14351bcc5a2">ASql::Data::IndySetBuilder&lt; T &gt;</a>, <a class="el" href="a00070.html#a3b6346c96c5487023e050149a12cea84">ASql::Data::SetSharedPtrBuilder&lt; T &gt;</a>, <a class="el" href="a00068.html#ad14f40c82972d1c067c40e4b90feeba9">ASql::Data::SetPtrBuilder&lt; T &gt;</a>, <a class="el" href="a00068.html#ad14f40c82972d1c067c40e4b90feeba9">ASql::Data::SetPtrBuilder&lt; typename T::value_type &gt;</a>, <a class="el" href="a00069.html#a1b23e3df7dd6725584699febde5c91b2">ASql::Data::SetRefBuilder&lt; T &gt;</a>, and <a class="el" href="a00065.html#aafec95bd336a2f144c4e4e568c620167">ASql::Data::SetBuilder&lt; T &gt;</a>.</p>

</div>
</div>
<hr/>The documentation for this struct was generated from the following file:<ul>
<li><a class="el" href="a00093_source.html">data.hpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Wed Aug 22 2012 20:35:53 for fastcgi++ by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.1
</small></address>
</body>
</html>
